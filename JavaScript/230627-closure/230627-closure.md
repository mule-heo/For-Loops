# 6월 27일 화요일 Closure 퀴즈 입니다.

```
function a(x) {
  x++;
  return function () {
    console.log(++x);
  };
}

a(1)();
a(1)();
a(1)();

let x = a(1);
x();
x();
x();
```

A: 1, 2, 3  그리고 1, 2, 3

B: 3, 3, 3 그리고 3, 4, 5

C: 3, 3, 3 그리고 1, 2, 3

D: 1, 2, 3 그리고 3, 3, 3

<br><hr><br>

정답 B: 3, 3, 3 그리고 3, 4, 5

1. 

    a(1)()를 세 번 반복하는 경우 매번 함수를 새롭게 호출합니다.

    a(1) 호출 시 x++까지 실행되어 x는 2가 되고 ++x를 출력하는 함수를 반환합니다.

    a(1)() 위의 과정을 통해 반환된 함수를 호출합니다. ++x는 3이 되고 3이 출력됩니다.

    정확히 동일한 과정을 3번 반복하므로 3이 3번 출력됩니다.

2.

    a(1) 실행 결과를 x에 저장합니다.

    x에는 a(1)의 실행 결과로 반환된 함수뿐만 아니라 a 함수가 선언된 환경에 대한 정보 또한 저장됩니다. 함수와 함수가 선언된 어휘적 환경의 조합을 '클로저'라고 합니다.

    a(1) 호출 시 1번의 경우와 마찬가지로 x++까지 실행되어 x는 2가 되고 ++x를 출력하는 함수를 반환합니다.

    x() 호출 시 ++x를 출력합니다. x는 2에서 3으로 재할당되어 3을 출력합니다.

    단, 함수에서 사용된 x는 함수 내부의 x가 아니라 외부 함수에서 선언된 x입니다. a 함수는 호출 후 반환되었음에도 불구하고 a 함수에서 정의된 x에 대한 참조를 유지하고 있으므로 x는 3으로 재할당됩니다.

    x() 호출 시 x는 3에서 4로 재할당되어 4를 출력합니다.

    x() 호출 시 x는 4에서 5로 재할당되어 5를 출력합니다.

참고

https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures